<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <title>Moonhub | Earn</title>
</head>
<body>
    
    <nav class="earn-nav active">
        <div class="nav-left">
            <a href="index.html"><img src="images/logo.png" alt=""></a>
        </div>
        <div class="nav-right">
            <ul>
                <li><a href="explore.html">Jobs</a></li>
                <li><a class="active" href="earn.html">Earn</a></li>
                <li><a class="community-link" href="#">x(Community)</a></li>
                <li><a class="startups-link" href="#">For Startups</a></li>
                <li class="blue-navlink"><a class="talk" href="#">Get Matched</a></li>
                <li class="menu-btn"><img src="assets/icons/menu.png" alt=""></li>
            </ul>
        </div>
    </nav>

    <div class="earn-mobile-menu active">
        <ul>
            <li><a href="explore.html">Jobs</a></li>
            <li><a href="earn.html">Earn</a></li>
            <li><a class="community-link" href="#">x(Community)</a></li>
            <li><a class="startups-link" href="#">For Startups</a></li>
            <li class="blue-navlink"><a class="talk" href="#">Talk to an Expert</a></li>
        </ul>
    </div>

    
    <section class="welcome">

        <div class="welcome-left">

            <h2>Welcome to Moonhub <strong>Connectors!</strong></h2>
            <p>
                Give the gift of Moonhub. Mint an Invite Code to share with friends & earn 10 Crescent Coins every time someone uses your to get hired!
            </p>
            <a href="#" class="welcome-btn"><strong> Get Your Code</strong></a>

        </div>

        <div class="welcome-right">
            <img src="images/welcome.gif" alt="">
        </div>

    </section>


    <h2 class="earn-title"><strong> Earn Crescent Coins </strong> when friends you refer get hired! </h2>


    <section class="earn">

        <h2 class="earn-section-title"><strong> Redeem </strong> your Crescent for exclusive rewards * </h2>

        <div class="earn-container">

            <div class="earn-item">
                <div class="earn-item-left blue-bg">
                    <h3>Macbook Pro or Air</h3>
                    <h5>(up to 2000$)</h5>
                </div>
                <div class="earn-item-right">
                    <h3>15 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left blue-bg">
                    <h3>5 Solana (SOL)</h3>
                </div>
                <div class="earn-item-right">
                    <h3>5 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left white-bg">
                    <h3>$1000 Donation to Charity of Your Choice</h3>
                </div>
                <div class="earn-item-right">
                    <h3>7 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left white-bg">
                    <h3>1 Yr Techcrunch + Netflix + Spotify Subscription</h3>
                </div>
                <div class="earn-item-right">
                    <h3>3 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left gray-bg">
                    <h3>Business Class Airfare Tickets</h3>
                    <h5>(up to 4000$)</h5>
                </div>
                <div class="earn-item-right">
                    <h3>20 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left gray-bg">
                    <h3>Quarterly Moonhub Swag Boxes</h3>
                </div>
                <div class="earn-item-right">
                    <h3>4 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left black-bg">
                    <h3>Original Peloton Bike</h3>
                    <h5>(or similar priced fitness)</h5>
                </div>
                <div class="earn-item-right">
                    <h3>15 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>
            <div class="earn-item">
                <div class="earn-item-left black-bg">
                    <h3>12 Monthly Snack Custom Boxes</h3>
                    <h5>(from SnackMagic)</h5>
                </div>
                <div class="earn-item-right">
                    <h3>5 <img src="images/sybmol.png" alt=""></h3>
                </div>
            </div>

        </div>

        <p class="earn-bottom">
            * <strong> Email</strong> earn@moonhub.xyz for a full list of rewards that can be redeemed with Crescent (constantly updated). You can also check your Crescent balance and redeem your Crescent via email. 
        </p>

    </section>


    <footer>

        <div class="footer-left">
            <h2>Company</h2>
            <ul>
                <li><a class="talk" href="#">Talk to an Expert</a></li>
                <li><a href="explore.html">Jobs</a></li>
                <li><a href="index.html">Home</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
        <div class="footer-right">
            <h2>Stay up to date with movements in Moonhub</h2>
            <a href="#">Join Discord <img src="assets/icons/discord.png" alt=""></a>
        </div>

    </footer>


    <div class="popup-invite">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h2><strong> Your </strong> Invite Code</h2>
            <p>Enter your email below to get your custom invite code sent via email!</p>
            <form class="popup-input" id="emailForm">
                <input type="text" id="emailInput" placeholder="You Email" required>
                <button type="submit"><img src="assets/icons/right.png" alt=""></button>
            </form>
            <h5 class="gen-code"></h5>
        </div>
    </div>

    <div class="popup">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h2><strong>Invite </strong> Code</h2>
            <p>
                Were you <strong> referred </strong> to Moonhub? 
            </p>
            <form class="popup-input" id="codeForm">
                <input type="text" id="codeInput" placeholder="Your invite code" required>
                <button type="submit"><img src="assets/icons/right.png" alt=""></button>
            </form>
            <p>
                * Don’t have a code and want to join Moonhub? Go to ‘Earn’ and mint your own code.
            </p>
            <h5 class="code-error">The Code is Incorrect.</h5>
        </div>
    </div>

    <div class="popup-startups">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h2><strong> Hire </strong> Top Talent</h2>
            <p>
                Moonhub represents the world's best <strong>engineers, product maagers, designers, </strong> etc in their job search. Email <strong>hello@moonhub.xyz</strong> to learn how you can start scaling your company with top-notch talent through Moonhub.
            </p>
        </div>
    </div>

    <div class="popup-community">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h2>Moonhub <strong> x(Community)</strong></h2>
            <p>
                We're partnering with the world's best <strong>tech forums, VCs, alumni groups, diversity initiatives, ++</strong> to match members to high-growth startup opportunities. Your group earns 1,000s $ every time someone finds a job on Moonhub with your <strong> x(Community) invite code. </strong> Eamil hello@moonhub.xyz to learn more and get started.
            </p>
        </div>
    </div>

    <!-- Calendly badge widget begin -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    <script type="text/javascript">window.onload = function() { Calendly.initBadgeWidget({ url: 'https://calendly.com/moonhub', text: 'Talk to an Agent', color: '#009acb', textColor: '#ffffff', branding: true }); }</script>
    <!-- Calendly badge widget end -->

    <script src="assets/js/jquery.js"></script>
    <script src="main.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>

    <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics.js";
        import { getDatabase, push, ref, set, onChildAdded, child, remove, onValue, get, orderByChild, query, equalTo } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBexLtfFSG_UyYcGpowKXGX3IjQTDYy1xM",
          authDomain: "moonhub-8040e.firebaseapp.com",
          projectId: "moonhub-8040e",
          storageBucket: "moonhub-8040e.appspot.com",
          messagingSenderId: "1093017471320",
          appId: "1:1093017471320:web:6d50c0e710cbbedfa5bd2d",
          measurementId: "G-E6FR4KEJKZ"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase();

        $('#emailForm').submit(function(e) {
            e.preventDefault()

            if ($('#emailInput').val() !== '') {

                var emailKey = $('#emailInput').val().replace('@','-').replace('.','-')
                get(ref(database, 'emails')).then((snapshot) => {
                    
                    if (snapshot.exists() && snapshot.val().hasOwnProperty(emailKey)) {
                        
                        get(child(ref(database, 'emails'), emailKey)).then((snapshot) => {
                            $('.gen-code').text(`You Code is: ${snapshot.val().code}`).fadeIn()
                        })


                    } else if (snapshot.exists() && snapshot.val().hasOwnProperty(emailKey) == false) {
                        var id = Date.now().toString(36) + Math.random().toString(36).substr(2);
                        set(child(ref(database, 'emails'), emailKey), {
                            email: $('#emailInput').val(),
                            code: id,
                            walletCount: 0
                        })
                        $('.gen-code').text(`You Code is: ${id}`).fadeIn()
                    } else {
                        var id = Date.now().toString(36) + Math.random().toString(36).substr(2);
                        set(child(ref(database, 'emails'), emailKey), {
                            email: $('#emailInput').val(),
                            code: id,
                            walletCount: 0
                        })
                        $('.gen-code').text(`You Code is: ${id}`).fadeIn()
                    }
                })

            } else {

            }
        })



        var emails;
        get(ref(database, 'emails')).then((snapshot) => {
            emails = snapshot
        })


        $('#codeForm').submit(function(e) {
            e.preventDefault()
            var exist = false
            if ($('#codeInput').val() !== '') {
                var id = $('#codeInput').val()
                $('.code-error').text('Checking...').fadeIn()

                emails.forEach(email => {
                    if (email.val().code == id) {
                        exist = true
                    } else {
                        //
                    }
                });

                setTimeout(() => {
                    
                    if (exist == false) {
                        $('.code-error').text('Your Code is Incorrect')
                        setTimeout(() => {
                            $('.code-error').fadeOut()
                        }, 2000);
                    } else {
                        $('.calendly-badge-content').click()
                        $('.code-error').fadeOut()
                    }

                }, 1000);


            } else {

            }
        })


      </script>
</body>
</html>