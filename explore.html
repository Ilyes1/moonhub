<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Moonhub | Explore Jobs</title>
</head>
<body>
    
    <nav class="explore-nav active">
        <div class="nav-left">
            <a href="index.html"><img src="images/logo.png" alt=""></a>
            <form class="search-container">
                <input type="text" class="search-input" placeholder="Search...">
                <button type="submit" class="search-btn"><img src="assets/icons/search.png" alt=""></button>
            </form>
        </div>
        <div class="nav-right">
            <ul>
                <li><a class="active" href="explore.html">Jobs</a></li>
                <li><a href="earn.html">Earn</a></li>
                <li><a class="community-link" href="#">x(Community)</a></li>
                <li><a class="startups-link" href="#">For Startups</a></li>
                <li class="blue-navlink"><a class="talk" href="#">Talk to an Expert</a></li>
                <li class="menu-btn"><img src="assets/icons/menu.png" alt=""></li>
            </ul>
        </div>
    </nav>

    <div class="explore-mobile-menu active">
        <ul>
            <li>
                <form class="search-container">
                    <input type="text" class="search-input">
                    <button type="submit" class="search-btn"><img src="assets/icons/search.png" alt=""></button>
                </form>
            </li>
            <li><a href="explore.html">Jobs</a></li>
            <li><a href="#">Earn</a></li>
            <li><a class="community-link" href="#">x(Community)</a></li>
            <li><a class="startups-link" href="#">For Startups</a></li>
            <li class="blue-navlink"><a class="talk" href="#">Talk to an Expert</a></li>
        </ul>
    </div>

    <div class="filters">
        <ul class="filters-list">
            <li class="filter">
                <h4>Role <img src="assets/icons/down.png" alt=""></h4>
                <ul>
                    <li><a data-filter="Software-Engineer" href="#">Software Engineer</a></li>
                    <li><a data-filter="Frontend-Engineer" href="#">Frontend Engineer</a></li>
                    <li><a data-filter="Blockchain-Engineer" href="#">Blockchain Engineer</a></li>
                    <li><a data-filter="Backend-Engineer" href="#">Backend Engineer</a></li>
                    <li><a data-filter="Machine-Learning-Engineer" href="#">Machine Learning Engineer</a></li>
                    <li><a data-filter="Security-Engineer" href="#">Security Engineer</a></li>
                    <li><a data-filter="Data-Scientist" href="#">Data Scientist</a></li>
                    <li><a data-filter="Designer" href="#">Designer</a></li>
                    <li><a data-filter="Product-Manager" href="#">Product Manager</a></li>
                    <li><a data-filter="BizDev/Ops" href="#">BizDev / Ops</a></li>
                    <li><a data-filter="Intern" href="#">Intern</a></li>
                </ul>
            </li>
            <li class="filter">
                <h4>Company Stage <img src="assets/icons/down.png" alt=""></h4>
                <ul>
                    <li><a data-filter="Seed" href="#">Seed</a></li>
                    <li><a data-filter="Series-A" href="#">Series A</a></li>
                    <li><a data-filter="Series-B" href="#">Series B</a></li>
                    <li><a data-filter="Series-C" href="#">Series C</a></li>
                    <li><a data-filter="Series-D+" href="#">Series D+</a></li>
                </ul>
            </li>
            <li class="filter">
                <h4>Sector <img src="assets/icons/down.png" alt=""></h4>
                <ul>
                    <li><a data-filter="Web3" href="#">Web3</a></li>
                    <li><a data-filter="Fintech" href="#">Fintech</a></li>
                    <li><a data-filter="AI/ML" href="#">AI/ML</a></li>
                    <li><a data-filter="Consumer" href="#">Consumer</a></li>
                    <li><a data-filter="SaaS" href="#">SaaS</a></li>
                    <li><a data-filter="Hardware" href="#">Hardware</a></li>
                </ul>
            </li>
            <li class="filter">
                <h4>Location <img src="assets/icons/down.png" alt=""></h4>
                <ul>
                    <li><a data-filter="SF-Bay-Area" href="#">SF Bay Area</a></li>
                    <li><a data-filter="NYC" href="#">NYC</a></li>
                    <li><a data-filter="Singapore" href="#">Singapore</a></li>
                </ul>
            </li>
            <li class="filter-switch">
                <h4>Remote</h4>
                <input type="checkbox" hidden="hidden" id="username">
                <label data-remote="no" class="switch" for="username"></label>
            </li>
        </ul>
    </div>

    <section class="jobs-container">

        <div class="jobs-left">

            <h2 class="jobs-title">Get Warm Introductions to High-Growth Startups (124+ Matches)</h2>

            <div class="jobs-items">
                
            </div>

        </div>

        <div class="jobs-right">

            <h2 class="trending-title">Trending</h2>
            <h3 class="section-subtitle">View opportunities popular within the Moonhub community. </h3>

            <div class="trending-container">

            </div>

        </div>

    </section>


    <footer>

        <div class="footer-left">
            <h2>Company</h2>
            <ul>
                <li><a class="talk" href="#">Talk to an Expert</a></li>
                <li><a href="explore.html">Jobs</a></li>
                <li><a href="index.html">Home</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
        <div class="footer-right">
            <h2>Stay up to date with movements in Moonhub</h2>
            <a href="#">Join Discord <img src="assets/icons/discord.png" alt=""></a>
        </div>

    </footer>

    <!-- Calendy Widget -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    <script type="text/javascript">window.onload = function() { Calendly.initBadgeWidget({ url: 'https://calendly.com/ihannouch7', text: 'Get matched by an agent', color: '#0069ff', textColor: '#ffffff', branding: false }); }</script>
    <!-- Calendy Widget End -->


    <div class="popup">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h3>Invite Code</h3>
            <p>
                You need an invite code from an existing member to talk to an Expert.  <br>
                <strong> Donâ€™t have a code but interested in joining Moonhub & meeting to top startups? </strong> Email hello@moonhub.xyz with your resume or LI! 
            </p>
            <form class="popup-input" id="codeForm">
                <input type="text" id="codeInput">
                <button type="submit"><img src="assets/icons/right.png" alt=""></button>
            </form>
            <h5 class="code-error">The Code is Incorrect.</h5>
        </div>
    </div>

    <div class="popup-startups">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h3>Hire Top Talent</h3>
            <p>
                Moonhub represents the world's best <strong>engineers, product maagers, designers, </strong> etc in their job search. Email <strong>hello@moonhub.xyz</strong> to learn how you can start scaling your company with top-notch talent through Moonhub.
            </p>
        </div>
    </div>

    <div class="popup-community">
        <div class="popup-overlay"></div>
        <div class="popup-container">
            <h3>Moonhub x(Community)</h3>
            <p>
                We're partnering with the world's best <strong>tech forums, VCs, alumni groups, diversity initiatives, ++</strong> to match members to high-growth startup opportunities. Your group earns 1,000s $ every time someone finds a job on Moonhub with your <strong> x(Community) invite code. </strong> Eamil hello@moonhub.xyz to learn more and get started.
            </p>
        </div>
    </div>
    
    <div class="popup-job">
        <div class="popup-overlay"></div>
        <div class="jobs-item popup-job-container">
            <div class="jobs-item-top">
                <div class="job-profile">
                    <img class="profile-img job-popup-img" src="${snapshot.val().image}" alt="">
                    <ul>
                        <li class="profile-title job-popup-role"></li>
                        <li class="profile-link"><span class="job-popup-company"> </span> <a class="job-popup-link" href="${snapshot.val().link}"> </a></li>
                        <li><img src="assets/icons/cube.png" alt=""><span class="job-popup-stage"></span></li>
                        <li><img src="assets/icons/location.png" alt=""> Remote: <span class="job-popup-remote"></span></li>
                    </ul>
                </div>
                <a href="#" class="profile-btn">Talk to an Expert</a>
            </div>
            <div class="jobs-item-bottom">
                <h4 class="job-popup-title"></h4>
                <p class="job-popup-description">
                    
                </p>
            </div>
        </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="main.js"></script>


    <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-analytics.js";
        import { getDatabase, push, ref, set, onChildAdded, child, remove, onValue } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBexLtfFSG_UyYcGpowKXGX3IjQTDYy1xM",
          authDomain: "moonhub-8040e.firebaseapp.com",
          projectId: "moonhub-8040e",
          storageBucket: "moonhub-8040e.appspot.com",
          messagingSenderId: "1093017471320",
          appId: "1:1093017471320:web:6d50c0e710cbbedfa5bd2d",
          measurementId: "G-E6FR4KEJKZ"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase();


        var addRemote = 'Yes'
        $('.add-choice.no .checkbox').click(function() {
            addRemote = 'No'
        })
        $('.add-choice.yes .checkbox').click(function() {
            addRemote = 'Yes'
        })

        $('.add-job-form').submit(function(e) {
            e.preventDefault()

            var company = $('#add-company').val()
            var link = $('#add-link').val()
            var title = $('#add-title').val()
            var role = $('#add-role').val()
            var location = $('#add-location').val()
            var stage = $('#add-stage').val()
            var sector = $('#add-sector').val()

            set(push(ref(database, 'jobs')), {
                company: company,
                link: link,
                title: title,
                role: role,
                location: location,
                remote: addRemote,
                stage: stage,
                sector: sector,
            })
        })

        onChildAdded(ref(database, 'jobs'), (snapshot) => {
            $('.jobs-items').prepend(`
                <div data-remote="${snapshot.val().remote}" class="jobs-item ${snapshot.val().roleFilter} ${snapshot.val().locationFilter} ${snapshot.val().sectorFilter} ${snapshot.val().stageFilter}">
                    <div class="jobs-item-top">
                        <div class="job-profile">
                            <img class="profile-img" src="${snapshot.val().image}" alt="">
                            <ul>
                                <li class="profile-title">${snapshot.val().role}</li>
                                <li class="profile-link">${snapshot.val().company} <a href="${snapshot.val().link}"> ${snapshot.val().link}</a></li>
                                <li><img src="assets/icons/cube.png" alt=""> ${snapshot.val().stage}</li>
                                <li><img src="assets/icons/location.png" alt=""> Remote: ${snapshot.val().remote}</li>
                            </ul>
                        </div>
                        <a href="#" class="profile-btn">Talk to an Expert</a>
                    </div>
                    <div class="jobs-item-bottom">
                        <h4>${snapshot.val().title}</h4>
                        <p>
                            ${snapshot.val().description}
                        </p>
                    </div>
                </div>
            `)
        })


        onChildAdded(ref(database, 'jobs'), (snapshot) => {
            if (snapshot.val().featured == 'Yes') {
                $('.trending-container').prepend(`
                    <div class="trending-item" style="background-image: url('${snapshot.val().image}');">
                        <div class="exclusives-item-top">
                            <h5>THIS JUST IN</h5>
                            <a href="explore.html" class="light-blue">SPECIAL PROJECTS GROUP</a>
                        </div>
                        <div class="exclusives-item-bottom">
                            <div class="exclusives-item-bottom-left">
                                <h3>${snapshot.val().role}</h3>
                                <h6 data-link="${snapshot.val().link}">${snapshot.val().company}</h6>
                            </div>
                            <div class="exclusives-item-bottom-right">
                                <ul>
                                    <li>Remote: ${snapshot.val().remote}</li>
                                    <li>${snapshot.val().stage}</li>
                                </ul>
                                <h6>Series</h6>
                            </div>
                        </div>
                        <p class="trending-title" hidden>${snapshot.val().title}</p>
                        <p class="trending-description" hidden>${snapshot.val().description}</p>
                    </div>
                `)
            } else {
                //
            }
        })
        

        $(document).on('click', '.trending-item', function() {
            var image = $(this).css('background-image').replace('url("', '').replace('")', '')
            var role = $(this).find('.exclusives-item-bottom-left h3').text()
            var company = $(this).find('.exclusives-item-bottom-left h6').text()
            var link = $(this).find('.exclusives-item-bottom-left h6').attr('data-link')
            var remote = $(this).find('.exclusives-item-bottom-right ul li:eq(0)').text()
            var stage = $(this).find('.exclusives-item-bottom-right ul li:eq(1)').text()
            var title = $(this).find('.trending-title').text()
            var description = $(this).find('.trending-description').html()

            $('.job-popup-img').attr('src', image)
            $('.job-popup-link').attr('href', link).text(link)
            $('.job-popup-company').text(company)
            $('.job-popup-role').text(role)
            $('.job-popup-remote').text(remote)
            $('.job-popup-stage').text(stage)
            $('.job-popup-title').text(title)
            $('.job-popup-description').html(description)

            $('.popup-job').fadeIn()
        })


        
        $('.filter a').click(function(e) {
            e.preventDefault()

            var key = $(this).attr('data-filter')
            console.log(key)
            $('.jobs-items').isotope({ filter: `.${key}` })
        })

        $('.switch').click(function() {
            if ($(this).attr('data-remote') == 'no') {
                $('.jobs-items').isotope({ filter: '.jobs-item[data-remote="Yes"]' })
                $(this).attr('data-remote', 'yes')
            } else {
                $('.jobs-items').isotope({ filter: '.jobs-item[data-remote="No"]' })
                $(this).attr('data-remote', 'no')
            }
        })


        $('.search-container').submit(function(e) {
            e.preventDefault()

            var value = $(this).find('input').val().toLowerCase();
            $(".jobs-item").filter(function() {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
                        

        })


        $('#codeForm').submit(function(e) {
            e.preventDefault()
            if ($('#codeInput').val() !== '') {
                var id = $('#codeInput').val()
                onValue(ref(database, 'emails'), (snapshot) => {
                    if (snapshot.val().hasOwnProperty(id)) {
                        $('.calendly-badge-content').click()
                    } else {
                        $('.code-error').fadeIn()
                        setTimeout(() => {
                            $('.code-error').fadeOut()
                        }, 2000);
                    }
                })
            } else {

            }
        })

        if (localStorage.getItem('search') !== null) {
            $('.search-container input').val(localStorage.getItem('search'))
            localStorage.clear()
        } else {
            //
        }




      </script>
</body>
</html>